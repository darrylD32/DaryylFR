<!DOCTYPE html>
<html>
<head>
    <title>Roulette Wheel Simulator</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #2c3e50;
        }
        .wheel {
            width: 400px;
            height: 400px;
            border: 2px solid white;
        }
        .numbers {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .number {
            width: 60px;
            height: 60px;
            background-color: white;
            border: 1px solid #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="wheel">
        <div class="numbers"></div>
    </div>

    <script>
        const wheel = document.querySelector('.wheel');
        const numbersContainer = document.querySelector('.numbers');

        // Create the roulette wheel with 37 numbers (0-36)
        let angles = [];
        for(let i = 0; i < 36; i++) {
            angles.push(i * Math.PI / 18 + Math.PI/2);
        }

        const numberElements = [];
        
        function createNumberElement(number) {
            return numbersContainer.appendChild(
                document.createElement('div')
                    .classList.add('number')
                    .textContent = number
                    .addEventListener('mouseover', () => {
                        wheel.style.transform = 'rotate(0deg)';
                        setTimeout(() => {
                            wheel.style.transform = `rotate(${Math.random() * 360}deg)`;
                        }, 500);
                    });
            );
        }

        // Add numbers to the wheel
        for(let i = 0; i < 37; i++) {
            if(i === 0) createNumberElement(0).classList.add('bg-0');
            else if(i === 1) createNumberElement(1).classList.add('bg-double-0');
            else createNumberElement(i);
        }

        let outcome;

        function spinWheel() {
            wheel.style.transform = `rotate(${Math.random() * 360}deg)`;
            
            // Randomly select a number
            outcome = Math.floor(Math.random() * 37);

            if(outcome === 0) {
                numbersContainer.querySelector('.bg-0').classList.add('win');
                setTimeout(() => {
                    numbersContainer.querySelector('.bg-0').classList.remove('win');
                }, 500);
            } else if(outcome === 1) {
                numbersContainer.querySelector('.bg-double-0').classList.add('win');
                setTimeout(() => {
                    numbersContainer.querySelector('.bg-double-0').classList.remove('win');
                }, 500);
            } else {
                const number = outcome;
                let winningNumbers = [number];
                
                // Check adjacent numbers for winning
                if(outcome > 1) {
                    if(Math.abs( (outcome -1) %37 )) ===1 && Math.floor( (outcome-1)/3.5 ) >=Math.floor(number /3.5)
                        || Math.abs( ((outcome +1) %37)) ===1 && Math.floor( (outcome+1)/3.5 ) >= Math.floor(number/3.5 )
                    )
                        winningNumbers.push(outcome -1, outcome +1);
                }

                numbersContainer.querySelector(`.number${outcome}`).classList.add('win');
                setTimeout(() => {
                    numbersContainer.querySelector(`.number${outcome}`).classList.remove('win');
                }, 500);
            }
        }

        // Function to place a bet
        function placeBet(number) {
            const numberElement = numbersContainer.querySelector(`.number${number}`);
            if(numberElement.classList.contains('win')) {
                return;
            }

            let totalBets = [
                ...Array(37).fill(null),
                { outcome: number, amount: 1 }
            ].filter(bet => bet.amount !== undefined);

            const winningAmounts = [];
            
            // Check adjacent numbers for winning
            if(number > 0) {
                if(Math.abs((number -1)) ===1 && Math.floor( (number-1)/3.5 ) >= Math.floor(number/3.5))
                    winningAmounts.push(number-1);
                
                if(Math.abs((number +1)) %37 ===1 && Math.floor( ((number+1))/3.5 ) >=Math.floor(number /3.5 ))
                    winningAmounts.push(number+1);
            }

            totalBets.forEach(bet => {
                if(bet.outcome === number) {
                    return { win: true, profit: bet.amount * 36 };
                }
                else if(winningAmounts.includes(bet.outcome))
                    return { win: true, profit: -bet.amount };
                else
                    return { win: false, profit: -bet.amount };
            });

            totalBets.forEach(bet => {
                if(!bet.win)
                    bet.profit = -bet.amount;
            });
        }

        // Spin when wheel loads or mouse moves
        window.addEventListener('load', spinWheel);
        document.addEventListener('mousemove', (e) => {
            const rect = wheel.getBoundingClientRect();
            let x = e.clientX - rect.left;
            let y = e.clientY - rect.top;

            if(Math.abs(x/30 + y*2/15 - 18.75) < Math.sqrt(6)/4 ||
                Math.abs(-x/30 + y*2/15 -18.75) < Math.sqrt(6)/4 ||
                Math.abs(x/30 - y*2/15 -18.75) < Math.sqrt(6)/4 ||
                Math.abs(-x/30 - y*2/15 - 18.75) < Math.sqrt(6)/4)
                spinWheel();
        });

        // Test placeBet function
        const testNumber = 18;
        console.log(placeBet(testNumber));
    </script>
</body>
</html>
